var Accordion=function(e,t){this.debug=false;this.$el=e;this.options=jQuery.extend(true,{},$.fn.accordion.defaults,t);this.$headers=this.$el.find("."+this.options.headerClass);this.$parents=this.$headers.parent();this.$el.data("Accordion",this)};Accordion.prototype={init:function(){this.addButtons();this.eventBindings();this.reset();this.log(this.$el);this.log(this.options)},destroy:function(){this.log("Destroy!");this.$el.off("click.accordion").find("."+this.options.collapseAndExpand.expandAllClass).remove().end().find("."+this.options.collapseAndExpand.collapseAllClass).remove().end()},reset:function(){this.log("Reseting Accordion to default state...");this.collapseAll();if(this.options.showFirstArea){this.$parents.first().addClass(this.options.expandClass)}},log:function(e){if(this.debug){console.log(e)}},clickHandler:function(e){var t=$(e.target),n=t.parent(),r=e.data,i=r.options;if(t.hasClass(i.collapseAndExpand.expandAllClass)){t.trigger("accordion-expand-all");r.expandAll();r.isOneButton(t);return}if(t.hasClass(i.collapseAndExpand.collapseAllClass)){t.trigger("accordion-collapse-all");r.collapseAll();r.isOneButton(t);return}if(n.hasClass(i.expandClass)&&!i.oneAreaAlwaysVisible){t.trigger("accordion-click");r.itemClick(t);return}if(t.hasClass(i.headerClass)){r.allowMultipleAreas();t.trigger("accordion-click");r.itemClick(t);return}},allowMultipleAreas:function(){if(!this.options.showMultipleAreas){this.log("   - Multiples arent allowed.");this.log("   - Collapsing Items.");this.collapseAll()}},isOneButton:function(e){this.log("   - Is this One Button? "+this.options.collapseAndExpand.showAsOneButton);if(this.options.collapseAndExpand.showAsOneButton){this.log("   - Switching button context.");if(!e.hasClass(this.options.collapseAndExpand.expandAllClass)){e.removeClass(this.options.collapseAndExpand.collapseAllClass).addClass(this.options.collapseAndExpand.expandAllClass).text(this.options.collapseAndExpand.expandAllText);return}e.removeClass(this.options.collapseAndExpand.expandAllClass).addClass(this.options.collapseAndExpand.collapseAllClass).text(this.options.collapseAndExpand.collapseAllText)}},eventBindings:function(){var e=this;this.log("Binding Events...");this.$el.on("click.accordion",e,e.clickHandler)},addButtons:function(){var e,t;if(this.options.showCollapseAndExpand){this.log("Adding Expand All Button...");e=$("<span/>",{"class":this.options.collapseAndExpand.expandAllClass,text:this.options.collapseAndExpand.expandAllText});this.log("Add Collpase All button?");this.log(!this.options.collapseAndExpand.showAsOneButton?"No.":"Yes.");t=!this.options.collapseAndExpand.showAsOneButton?$("<span/>",{"class":this.options.collapseAndExpand.collapseAllClass,text:this.options.collapseAndExpand.collapseAllText}):"";$(this.$el).prepend(e,t)}e=null;t=null},itemClick:function(e){var t=e.parent();t.toggleClass(this.options.expandClass)},expandAll:function(){this.$parents.addClass(this.options.expandClass)},collapseAll:function(){this.$parents.removeClass(this.options.expandClass)}};jQuery.fn.accordion=function(e){if(typeof e!=="string"){return this.each(function(){var t=new Accordion(jQuery(this),e);t.init()})}else{Accordion=$(this).data("Accordion");if(Accordion!==null){switch(e){case"init":Accordion.init();break;case"reset":Accordion.reset();break;case"destroy":Accordion.destroy();break}}}};jQuery.fn.accordion.defaults={headerClass:"accordion-header",contentClass:"accordion-content",expandClass:"accordion-expanded",showMultipleAreas:false,showFirstArea:false,oneAreaAlwaysVisible:false,showCollapseAndExpand:false,collapseAndExpand:{showAsOneButton:false,expandAllClass:"accordion-expand-all",collapseAllClass:"accordion-collapse-all",expandAllText:"Expand All",collapseAllText:"Collapse All"}}
