var Accordion=function(e,t){this.debug=false;this.$el=e;this.options=jQuery.extend(true,{},jQuery.fn.accordion.defaults,t);this.$headers=this.$el.find("."+this.options.headerClass);this.$parents=this.$headers.parent();this.$el.data("Accordion",this)};Accordion.prototype={init:function(){this._addButtons();this._eventBindings();this.reset();this._log(this.$el);this._log(this.options)},destroy:function(){this._log("Destroy!");this.$el.off("click.accordion").find("."+this.options.collapseAndExpand.expandAllClass).remove().end().find("."+this.options.collapseAndExpand.collapseAllClass).remove().end()},reset:function(){this._log("Reseting Accordion to default state...");this._collapseAll();if(this.options.showFirstArea){this.$parents.first().addClass(this.options.expandClass)}},_log:function(e){if(this.debug){console.log(e)}},_clickHandler:function(e){var t=jQuery(e.target),n=t.parent(),r=e.data,i=r.options;if(t.hasClass(i.collapseAndExpand.expandAllClass)){t.trigger("accordion-expand-all");r._expandAll();r._isOneButton(t);return}if(t.hasClass(i.collapseAndExpand.collapseAllClass)){t.trigger("accordion-collapse-all");r._collapseAll();r._isOneButton(t);return}if(n.hasClass(i.expandClass)&&!i.oneAreaAlwaysVisible){t.trigger("accordion-click");r._itemClick(t);return}if(t.hasClass(i.headerClass)){r._allowMultipleAreas();t.trigger("accordion-click");r._itemClick(t);return}},_allowMultipleAreas:function(){if(!this.options.showMultipleAreas){this._log("   - Multiples arent allowed.");this._log("   - Collapsing Items.");this._collapseAll()}},_isOneButton:function(e){this._log("   - Is this One Button? "+this.options.collapseAndExpand.showAsOneButton);if(this.options.collapseAndExpand.showAsOneButton){this._log("   - Switching button context.");if(!e.hasClass(this.options.collapseAndExpand.expandAllClass)){e.removeClass(this.options.collapseAndExpand.collapseAllClass).addClass(this.options.collapseAndExpand.expandAllClass).text(this.options.collapseAndExpand.expandAllText);return}e.removeClass(this.options.collapseAndExpand.expandAllClass).addClass(this.options.collapseAndExpand.collapseAllClass).text(this.options.collapseAndExpand.collapseAllText)}},_eventBindings:function(){var e=this;this._log("Binding Events...");this.$el.on("click.accordion",e,e._clickHandler)},_addButtons:function(){var e,t;if(this.options.showCollapseAndExpand){this._log("Adding Expand All Button...");e=jQuery("<span/>",{"class":this.options.collapseAndExpand.expandAllClass,text:this.options.collapseAndExpand.expandAllText});this._log("Add Collpase All button?");this._log(!this.options.collapseAndExpand.showAsOneButton?"No.":"Yes.");t=!this.options.collapseAndExpand.showAsOneButton?jQuery("<span/>",{"class":this.options.collapseAndExpand.collapseAllClass,text:this.options.collapseAndExpand.collapseAllText}):"";$(this.$el).prepend(e,t)}e=null;t=null},_itemClick:function(e){var t=e.parent();t.toggleClass(this.options.expandClass)},_expandAll:function(){this.$parents.addClass(this.options.expandClass)},_collapseAll:function(){this.$parents.removeClass(this.options.expandClass)}};jQuery.fn.accordion=function(e){if(typeof e!=="string"){return this.each(function(){var t=new Accordion(jQuery(this),e);t.init()})}else{Accordion=jQuery(this).data("Accordion");if(Accordion!==null){switch(e){case"init":Accordion.init();break;case"reset":Accordion.reset();break;case"destroy":Accordion.destroy();break}}}};jQuery.fn.accordion.defaults={headerClass:"accordion-header",contentClass:"accordion-content",expandClass:"accordion-expanded",showMultipleAreas:false,showFirstArea:false,oneAreaAlwaysVisible:false,showCollapseAndExpand:false,collapseAndExpand:{showAsOneButton:false,expandAllClass:"accordion-expand-all",collapseAllClass:"accordion-collapse-all",expandAllText:"Expand All",collapseAllText:"Collapse All"}}
